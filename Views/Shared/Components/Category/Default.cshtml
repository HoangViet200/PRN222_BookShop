@model IEnumerable<Category>

<ul class="list-group">
    <li class="list-group-item">
        <a asp-controller="Book" asp-action="Index">All Categories</a>
    </li>
@foreach (var item in Model)
{
    <li class="list-group-item category-item @(ViewBag.SelectedCategoryId == item.CategoryID ? "active" : "")"
        data-category-id="@item.CategoryID">
        <a asp-controller="Book" asp-action="Index" asp-route-categoryId="@item.CategoryID">
            @item.Name
        </a>
    </li>

    if (item.SubCategories?.Any() == true)
    {
        var showSub = (ViewBag.SelectedCategoryId != null && ViewBag.SelectedCategoryId == item.CategoryID)
            ? "block" : "none";

        <ul class="subcategory-list" style="display:@showSub" id="sub_@item.CategoryID">
            @foreach (var sub in item.SubCategories)
            {
                <li class="list-group-item ">
                    <a asp-controller="Book" asp-action="Index" asp-route-categoryId="@item.CategoryID" asp-route-subcategoryId="@sub.SubCategoryID">
                        @sub.Name
                    </a>
                </li>
            }
        </ul>
    }
}


</ul>

<style>

    .list-group-item {
        border: none !important;
        padding-left: 0.5rem;
        background-color: transparent !important;
    }

        .list-group-item:hover {
            background-color: transparent !important;
        }

    .subcategory-list {
        padding-left: 1.5rem;
        margin-top: 0.3rem;
    }

</style>


